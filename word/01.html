<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>标题一 | 记录BUG的每一天</title>
    <meta name="generator" content="VuePress 1.9.9">
    
    <meta name="description" content="我是一个只会打酱油的，遇见问题只会百度解决，但百度也不一定能解决我的疑惑。也没有人可以问············">
    
    <link rel="preload" href="/assets/css/0.styles.e8e4f3a3.css" as="style"><link rel="preload" href="/assets/js/app.8e6d1133.js" as="script"><link rel="preload" href="/assets/js/2.733019b2.js" as="script"><link rel="preload" href="/assets/js/10.5fe2777f.js" as="script"><link rel="prefetch" href="/assets/js/11.1debed55.js"><link rel="prefetch" href="/assets/js/3.4122aa84.js"><link rel="prefetch" href="/assets/js/4.d12742be.js"><link rel="prefetch" href="/assets/js/5.216cae74.js"><link rel="prefetch" href="/assets/js/6.2d0a63f8.js"><link rel="prefetch" href="/assets/js/7.003f06d6.js"><link rel="prefetch" href="/assets/js/8.fd45543f.js"><link rel="prefetch" href="/assets/js/9.db864e43.js">
    <link rel="stylesheet" href="/assets/css/0.styles.e8e4f3a3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container no-sidebar"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">记录BUG的每一天</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/word/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/liunx/01.html" class="nav-link">
  liunx
</a></li><li class="dropdown-item"><!----> <a href="/guide/01.html" class="nav-link">
  springboot
</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  首页
</a></div><div class="nav-item"><a href="/word/" class="nav-link router-link-active">
  文档
</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="Language Menu" class="dropdown-title"><span class="title">编程</span> <span class="arrow down"></span></button> <button type="button" aria-label="Language Menu" class="mobile-dropdown-title"><span class="title">编程</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/liunx/01.html" class="nav-link">
  liunx
</a></li><li class="dropdown-item"><!----> <a href="/guide/01.html" class="nav-link">
  springboot
</a></li></ul></div></div> <!----></nav>  <!----> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="标题一"><a href="#标题一" class="header-anchor">#</a> 标题一</h1> <p><strong>基本信息</strong></p> <p><strong>日志</strong>：就是能够准确无误地把系统在运行状态中所发生的情况描述出来（连接超时、用户操作、异常抛出等等）； <strong>日志框架</strong>：就是集成能够将日志信息统一规范后输出的工具包。</p> <h2 id="logback优势"><a href="#logback优势" class="header-anchor">#</a> <strong>Logback优势</strong></h2> <p>Logback框架又有何优势，首先，我们得明白框架能够帮我能够做些什么?</p> <ol><li>自定义输出路径，后期好维护（方便运维的伙伴） 能够将日志信息存储到本地文件或存储到<a href="https://cloud.tencent.com/solution/database?from=10680" target="_blank" rel="noopener noreferrer">数据库<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>中去，而且根据滚动策略设置一天一个文件</li> <li>根据你的喜好，自定制日志的输出格式 可以通过配置文件修改日志文件的具体内容，在不改变原有业务代码的情况下改变输出格式，方便调试</li> <li>随身携带着日志上下文信息 上下文中包含着时间戳、类的所在路径、所占用的堆栈信息和占用的线程等等</li> <li>可选择运行时输出的内容 运行无误的时候，我们只在乎返回的运行信息；运行出错的时候，选择返回错误信息</li> <li>配置方便、性能高 框架与业务代码耦合小，正常业务之外的审计和运维需求，与系统性能无关</li></ol> <h2 id="框架配置"><a href="#框架配置" class="header-anchor">#</a> <strong>框架配置</strong></h2> <p>logback常用的有两种配置方案：</p> <ol><li><p>在SpringBoot项目自带的application.properties/application.yml里配置（这种配置都是简单的配置，SpringBoot已经集成好的）。 这种一般适用个人学习项目，快速开发的可以推荐</p></li> <li><p>单独在resources文件下创建 logback.xml 配置文件，来进行更为复杂的配置。（推荐使用，配置信息足够详细）</p></li></ol> <h2 id="总体代码"><a href="#总体代码" class="header-anchor">#</a> <strong>总体代码</strong></h2> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span><span class="token operator">?</span>xml version<span class="token operator">=</span><span class="token string">&quot;1.0&quot;</span> encoding<span class="token operator">=</span><span class="token string">&quot;UTF-8&quot;</span><span class="token operator">?</span><span class="token operator">&gt;</span>
<span class="token operator">&lt;</span>configuration scan<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> scanPeriod<span class="token operator">=</span><span class="token string">&quot;300 seconds&quot;</span> debug<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 定义参数参数  <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">TRACE</span><span class="token operator">&lt;</span><span class="token constant">DEBUG</span><span class="token operator">&lt;</span><span class="token constant">INFO</span><span class="token operator">&lt;</span><span class="token constant">WRAN</span><span class="token operator">&lt;</span><span class="token constant">ERROR</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.level&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;debug&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.maxHistory&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;30&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.filePath&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;E:/study&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.pattern&quot;</span>
	 value<span class="token operator">=</span><span class="token string">&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} -%msg%n&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 控制台设置 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;consoleAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">DEBUG</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;debugAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>debug<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>debug<span class="token operator">/</span>debug<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留debug优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">DEBUG</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">INFO</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;infoAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>info<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>info<span class="token operator">/</span>info<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留info优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">INFO</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
	
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">ERROR</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;errorAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>webapps<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>error<span class="token operator">/</span>error<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留error优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
	
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 该 logger 只会记录debug 优先级别以上的日志信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子logger <span class="token operator">--</span><span class="token operator">&gt;</span>
 	<span class="token operator">&lt;</span>logger name<span class="token operator">=</span><span class="token string">&quot;com.hyxiao.logback.test&quot;</span> level<span class="token operator">=</span><span class="token string">&quot;${log.level}&quot;</span> additivity<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>
 		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 与append相绑定，logger文件会往这三个对象输出日志信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;debugAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;infoAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;errorAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>logger<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父logger（上面的logger为子logger），当根logger没有设置 level 时 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 则会继承父logger设置的lever等级，即输出 info（warn、error） 级别的信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>root level<span class="token operator">=</span><span class="token string">&quot;info&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;consoleAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>root<span class="token operator">&gt;</span>
<span class="token operator">&lt;</span><span class="token operator">/</span>configuration<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <h2 id="代码分析"><a href="#代码分析" class="header-anchor">#</a> <a href="https://cloud.tencent.com/product/tcap?from=10680" target="_blank" rel="noopener noreferrer"><strong>代码分析</strong><span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></h2> <ul><li>首先是 configuration 父标签，一般情况下，该标签可不添加任何属性（可选）</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">&lt;</span>configuration scan<span class="token operator">=</span><span class="token string">&quot;true&quot;</span> scanPeriod<span class="token operator">=</span><span class="token string">&quot;300 seconds&quot;</span> debug<span class="token operator">=</span><span class="token string">&quot;false&quot;</span><span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>设置 scan = “true”，配置文件发生改变，便会重新加载，默认为 true。 设置 scanPeriod=“300 seconds”，开启scan之后，300s内会去扫描配置文件的变化。 设置 debug = “false”，当设置为false时，系统<strong>不会</strong>输出logback底层的日志信息，即logback的运行状态</p> <ul><li>其次是 property 子标签，设置 logback 的参数（可选）</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.level&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;debug&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.maxHistory&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;30&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.filePath&quot;</span> value<span class="token operator">=</span><span class="token string">&quot;E:/study&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>property name<span class="token operator">=</span><span class="token string">&quot;log.pattern&quot;</span>
	 value<span class="token operator">=</span><span class="token string">&quot;%d{yyyy-MM-dd HH:mm:ss.SSS} [%thread] %-5level %logger{50} -%msg%n&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>log.level 指的是logback的日志级别，设置debug 日志级别总共分为五大级别，分别为 <strong>TRACE &lt; DEBUG &lt; INFO &lt; WRAN &lt; ERROR</strong> 当级别设置为 debug ，则按照优先级来输出，依次输出 debug，info，wran，error这四个等级的信息，trace优先级不够。 logback的优先级图如下：</p> <p><img src="https://ask.qcloudimg.com/http-save/1422397/9bc8325f34be1cea356327331fe5e10b.jpeg?imageView2/2/w/1620" alt="img"></p> <p>log.maxHistory 指的是文件最大保存历史数量 log.filePath 指的是<a href="https://cloud.tencent.com/product/cfs?from=10680" target="_blank" rel="noopener noreferrer">文件存储<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a>的根路径 log.pattern 指的是日志呈现的最终格式，</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd <span class="token constant">HH</span><span class="token operator">:</span>mm<span class="token operator">:</span>ss<span class="token punctuation">.</span><span class="token constant">SSS</span><span class="token punctuation">}</span> <span class="token punctuation">[</span><span class="token operator">%</span>thread<span class="token punctuation">]</span> <span class="token operator">%</span><span class="token operator">-</span>5level <span class="token operator">%</span>logger<span class="token punctuation">{</span><span class="token number">50</span><span class="token punctuation">}</span> <span class="token operator">-</span><span class="token operator">%</span>msg<span class="token operator">%</span>n
</code></pre></div><p>复制</p> <p>%d ：指的是时间格式，{年月日小时分钟秒} [%thread]： 属于哪个线程执行 %-5level ： 级别从左显示5个字符宽度，缩进5位来显示日志层级信息 %logger{50} -%msg ：哪个类里面输出的日志信息 %n：换行符</p> <ul><li>接下来是 appender 子标签</li></ul> <p>encoder属性（ ${log.pattern }在 property 标签中已经配置，可直接引用）</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>    <span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;consoleAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span><span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span>layout <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.PatternLayout&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
        <span class="token operator">&lt;</span><span class="token operator">/</span>layout<span class="token operator">&gt;</span>
    <span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>DEBUG级别的设置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">DEBUG</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;debugAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>debug<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>debug<span class="token operator">/</span>debug<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留debug优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">DEBUG</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>INFO级别的设置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">INFO</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;infoAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>info<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>info<span class="token operator">/</span>info<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留info优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">INFO</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>ERROR级别的设置</p> <div class="language-javascript extra-class"><pre class="language-javascript"><code>	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> <span class="token constant">ERROR</span> <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>appender name<span class="token operator">=</span><span class="token string">&quot;errorAppender&quot;</span> <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.RollingFileAppender&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件路径 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>file<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>logs<span class="token operator">/</span>webapps<span class="token operator">/</span>error<span class="token punctuation">.</span>log<span class="token operator">&lt;</span><span class="token operator">/</span>file<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 滚动策略 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>rollingPolicy <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.core.rolling.TimeBasedRollingPolicy&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件名称 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>fileNamePattern<span class="token operator">&gt;</span>
				$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>filePath<span class="token punctuation">}</span><span class="token operator">/</span>error<span class="token operator">/</span>error<span class="token punctuation">.</span><span class="token operator">%</span>d<span class="token punctuation">{</span>yyyy<span class="token operator">-</span><span class="token constant">MM</span><span class="token operator">-</span>dd<span class="token punctuation">}</span><span class="token punctuation">.</span>log<span class="token punctuation">.</span>gz
			<span class="token operator">&lt;</span><span class="token operator">/</span>fileNamePattern<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 文件最大保存历史数量 <span class="token operator">--</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>maxHistory<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>maxHistory<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>maxHistory<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>rollingPolicy<span class="token operator">&gt;</span>
		
		<span class="token operator">&lt;</span>encoder<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>pattern<span class="token operator">&gt;</span>$<span class="token punctuation">{</span>log<span class="token punctuation">.</span>pattern<span class="token punctuation">}</span><span class="token operator">&lt;</span><span class="token operator">/</span>pattern<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>encoder<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 过滤器（仅保留error优先级的日志信息） <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>filter <span class="token keyword">class</span><span class="token operator">=</span><span class="token string">&quot;ch.qos.logback.classic.filter.LevelFilter&quot;</span><span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>level<span class="token operator">&gt;</span><span class="token constant">ERROR</span><span class="token operator">&lt;</span><span class="token operator">/</span>level<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMatch<span class="token operator">&gt;</span><span class="token constant">ACCEPT</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMatch<span class="token operator">&gt;</span>
			<span class="token operator">&lt;</span>onMismatch<span class="token operator">&gt;</span><span class="token constant">DENY</span><span class="token operator">&lt;</span><span class="token operator">/</span>onMismatch<span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">/</span>filter<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>appender<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <ul><li>最后一个子标签是 logger 和 root，用来存放日志对象，通知 logback 需要关注哪个包下的类信息</li></ul> <div class="language-javascript extra-class"><pre class="language-javascript"><code>		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 该 logger 只会记录debug 优先级别以上的日志信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 子logger <span class="token operator">--</span><span class="token operator">&gt;</span>
 	<span class="token operator">&lt;</span>logger name<span class="token operator">=</span><span class="token string">&quot;com.hyxiao.logback.test&quot;</span> level<span class="token operator">=</span><span class="token string">&quot;${log.level}&quot;</span> additivity<span class="token operator">=</span><span class="token string">&quot;true&quot;</span><span class="token operator">&gt;</span>
 		<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 与append相绑定，logger文件会往这三个对象输出日志信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;debugAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;infoAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;errorAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>logger<span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 父logger（上面的logger为子logger），当根logger没有设置 level 时 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">!</span><span class="token operator">--</span> 则会继承父logger设置的lever等级，即输出 info（warn、error） 级别的信息 <span class="token operator">--</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span>root level<span class="token operator">=</span><span class="token string">&quot;info&quot;</span><span class="token operator">&gt;</span>
		<span class="token operator">&lt;</span>appender<span class="token operator">-</span>ref ref<span class="token operator">=</span><span class="token string">&quot;consoleAppender&quot;</span><span class="token operator">/</span><span class="token operator">&gt;</span>
	<span class="token operator">&lt;</span><span class="token operator">/</span>root<span class="token operator">&gt;</span>
</code></pre></div><p>复制</p> <p>这上面的 <strong>additivity&quot;</strong> 属性默认为true，当设置为 true 时，子logger会向root传递它收集好的信息，这里就是子logger会去root标签下，将appender-ref 添加到 子logger（） 里面去，即子logger里面也能支持在控制台输出日志信息。</p> <h2 id="复习"><a href="#复习" class="header-anchor">#</a> <strong>复习</strong></h2> <p><strong>logger</strong>：主要用于存放日志对象，定义日志类型和级别。 <strong>appender</strong>：用于指定日志输出的目的地，目的地可以是控制台，文件等等。 <strong>layout</strong>：格式化日志的输出信息。</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.8e6d1133.js" defer></script><script src="/assets/js/2.733019b2.js" defer></script><script src="/assets/js/10.5fe2777f.js" defer></script>
  </body>
</html>
